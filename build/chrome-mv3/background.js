var background=(function(){"use strict";function i(e){return e==null||typeof e=="function"?{main:e}:e}const t="rctHistory",u=20;async function l(){const e=await chrome.storage.local.get(t);return Array.isArray(e[t])?e[t]:[]}async function d(e,s){const o=await l(),r=[{path:e,framework:s,timestamp:Date.now()},...o].slice(0,u);return await chrome.storage.local.set({[t]:r}),r}const f=i(()=>{chrome.runtime.onMessage.addListener((e,s,o)=>{if(e.type==="START_PICK")return chrome.tabs.query({active:!0,currentWindow:!0},a=>{const r=a[0]?.id;r&&chrome.tabs.sendMessage(r,e)}),o({ok:!0}),!1;if(e.type==="DETECT_FRAMEWORK")return chrome.tabs.query({active:!0,currentWindow:!0},a=>{const r=a[0]?.id;r&&chrome.tabs.sendMessage(r,e)}),o({ok:!0}),!1;if(e.type==="DETECT_RESULT")return chrome.runtime.sendMessage(e).catch(()=>{}),!1;if(e.type==="PICK_RESULT")return d(e.path,e.framework),chrome.runtime.sendMessage(e).catch(()=>{}),!1;if(e.type==="PICK_ERROR")return chrome.runtime.sendMessage(e).catch(()=>{}),!1})});function b(){}globalThis.browser?.runtime?.id?globalThis.browser:globalThis.chrome;function n(e,...s){}const h={debug:(...e)=>n(console.debug,...e),log:(...e)=>n(console.log,...e),warn:(...e)=>n(console.warn,...e),error:(...e)=>n(console.error,...e)};let c;try{c=f.main(),c instanceof Promise&&console.warn("The background's main() function return a promise, but it must be synchronous")}catch(e){throw h.error("The background crashed on startup!"),e}var y=c;return y})();
