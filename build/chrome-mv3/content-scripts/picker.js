var picker=(function(){"use strict";function M(e){return e}const u=globalThis.browser?.runtime?.id?globalThis.browser:globalThis.chrome;async function k(e,n){const t=u.runtime.getURL(e),r=document.createElement("script");u.runtime.getManifest().manifest_version===2?r.text=await fetch(t).then(l=>l.text()):r.src=t;const s=C(r);return await n?.modifyScript?.(r),(document.head??document.documentElement).append(r),n?.keepInDom||r.remove(),await s,{script:r}}function C(e){return new Promise((n,t)=>{const r=()=>{n(),l()},s=()=>{t(new Error(`Failed to load script: ${e.src}`)),l()},l=()=>{e.removeEventListener("load",r),e.removeEventListener("error",s)};e.addEventListener("load",r),e.addEventListener("error",s)})}const T={matches:["<all_urls>"],runAt:"document_idle",async main(){let e=!1,n=0,t=null,r=null;r=(await k("/component-reader.js",{keepInDom:!0})).script,chrome.runtime.onMessage.addListener((i,o,c)=>(i.type==="START_PICK"&&(n=i.depth,l(),c({ok:!0})),!1));function l(){e||(e=!0,x(),document.addEventListener("mousemove",E,!0),document.addEventListener("click",g,!0),document.addEventListener("keydown",w,!0))}function v(){e&&(e=!1,document.removeEventListener("mousemove",E,!0),document.removeEventListener("click",g,!0),document.removeEventListener("keydown",w,!0),_())}function x(){t||(t=document.createElement("div"),t.id="rct-picker-overlay",Object.assign(t.style,{position:"fixed",border:"2px solid #61dafb",backgroundColor:"rgba(97, 218, 251, 0.1)",pointerEvents:"none",zIndex:"2147483647",transition:"all 50ms ease-out",display:"none"}),document.body.appendChild(t))}function _(){t&&(t.remove(),t=null)}function E(i){const o=i.target;if(!o||!t||o===t||o.id==="rct-picker-overlay")return;const c=o.getBoundingClientRect();Object.assign(t.style,{top:c.top+"px",left:c.left+"px",width:c.width+"px",height:c.height+"px",display:"block"})}function g(i){i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation();const o=i.target;if(!o||o===t)return;document.querySelectorAll("[data-rct-pick]").forEach(a=>{a.removeAttribute("data-rct-pick")}),o.setAttribute("data-rct-pick","true");const c=crypto.randomUUID(),S=(a=>{if(a.detail.pickId===c){if(r?.removeEventListener("rct-fiber-path-result",S),o.removeAttribute("data-rct-pick"),v(),a.detail.error)f({type:"PICK_ERROR",error:a.detail.error,framework:a.detail.framework});else if(a.detail.path){const b=a.detail.framework;navigator.clipboard.writeText(a.detail.path).then(()=>f({type:"PICK_RESULT",path:a.detail.path,framework:b}),N=>f({type:"PICK_ERROR",error:`Clipboard write failed: ${N}`,framework:b}))}}});r?.addEventListener("rct-fiber-path-result",S),r?.dispatchEvent(new CustomEvent("rct-get-fiber-path",{detail:{pickId:c,depth:n}}))}function w(i){i.key==="Escape"&&(i.preventDefault(),i.stopPropagation(),v())}function f(i){chrome.runtime.sendMessage(i)}}};function m(e,...n){}const y={debug:(...e)=>m(console.debug,...e),log:(...e)=>m(console.log,...e),warn:(...e)=>m(console.warn,...e),error:(...e)=>m(console.error,...e)};var L=class I extends Event{static EVENT_NAME=h("wxt:locationchange");constructor(n,t){super(I.EVENT_NAME,{}),this.newUrl=n,this.oldUrl=t}};function h(e){return`${u?.runtime?.id}:picker:${e}`}function P(e){let n,t;return{run(){n==null&&(t=new URL(location.href),n=e.setInterval(()=>{let r=new URL(location.href);r.href!==t.href&&(window.dispatchEvent(new L(r,t)),t=r)},1e3))}}}var R=class d{static SCRIPT_STARTED_MESSAGE_TYPE=h("wxt:content-script-started");id;abortController;locationWatcher=P(this);constructor(n,t){this.contentScriptName=n,this.options=t,this.id=Math.random().toString(36).slice(2),this.abortController=new AbortController,this.stopOldScripts(),this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(n){return this.abortController.abort(n)}get isInvalid(){return u.runtime?.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(n){return this.signal.addEventListener("abort",n),()=>this.signal.removeEventListener("abort",n)}block(){return new Promise(()=>{})}setInterval(n,t){const r=setInterval(()=>{this.isValid&&n()},t);return this.onInvalidated(()=>clearInterval(r)),r}setTimeout(n,t){const r=setTimeout(()=>{this.isValid&&n()},t);return this.onInvalidated(()=>clearTimeout(r)),r}requestAnimationFrame(n){const t=requestAnimationFrame((...r)=>{this.isValid&&n(...r)});return this.onInvalidated(()=>cancelAnimationFrame(t)),t}requestIdleCallback(n,t){const r=requestIdleCallback((...s)=>{this.signal.aborted||n(...s)},t);return this.onInvalidated(()=>cancelIdleCallback(r)),r}addEventListener(n,t,r,s){t==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),n.addEventListener?.(t.startsWith("wxt:")?h(t):t,r,{...s,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),y.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){document.dispatchEvent(new CustomEvent(d.SCRIPT_STARTED_MESSAGE_TYPE,{detail:{contentScriptName:this.contentScriptName,messageId:this.id}})),window.postMessage({type:d.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:this.id},"*")}verifyScriptStartedEvent(n){const t=n.detail?.contentScriptName===this.contentScriptName,r=n.detail?.messageId===this.id;return t&&!r}listenForNewerScripts(){const n=t=>{!(t instanceof CustomEvent)||!this.verifyScriptStartedEvent(t)||this.notifyInvalidated()};document.addEventListener(d.SCRIPT_STARTED_MESSAGE_TYPE,n),this.onInvalidated(()=>document.removeEventListener(d.SCRIPT_STARTED_MESSAGE_TYPE,n))}};function U(){}function p(e,...n){}const A={debug:(...e)=>p(console.debug,...e),log:(...e)=>p(console.log,...e),warn:(...e)=>p(console.warn,...e),error:(...e)=>p(console.error,...e)};return(async()=>{try{const{main:e,...n}=T;return await e(new R("picker",n))}catch(e){throw A.error('The content script "picker" crashed on startup!',e),e}})()})();
picker;